<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>nest-blog-api documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="./images/favicon.ico">
	   <link rel="stylesheet" href="./styles/style.css">
        <link rel="stylesheet" href="./styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="./" class="navbar-brand">nest-blog-api documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content getting-started">
                   <div class="content-data">

<h1>Blog API</h1>
<p>This is a blog backend API where users can authenticate, create posts with different meta options, create tags and add them to posts. Also it is possible to upload image files to the server (images will be saved to S3 bucket on Amazon). The project is built using NestJS, PostgeSQL, TypeORM. Alternatively there is a simplified version which uses MongoDB and Mongoose (available on separate branch). Authorization and authentication is implemented with JWT. It is also possible to authenticate using Google.</p>
<h2>Features</h2>
<ul>
<li><strong>Posts Management</strong>: Authorized users can create, update and delete posts. Also it is possible to fetch paginated posts in some dates range.</li>
<li><strong>Users Authentication</strong>: After signing in user receives access and refresh tokens.</li>
<li><strong>User Account Management</strong>: It is possible to create and update single user account and also create multiple users with one request.</li>
<li><strong>Meta Options</strong>: Meta options is a special property which can be attached to the post. Meta options can be separately created.</li>
<li><strong>Tags</strong>: Tags are also one of posts properties and should be created before adding to post.</li>
<li><strong>Upload images</strong>: There is a possibility to upload image files to the server. As a response user receives a cloudfront url attached to the apploaded image.</li>
</ul>
<h2>Technologies</h2>
<h3>Development</h3>
<ul>
<li><strong>NestJS</strong>: A progressive Node.js framework for building efficient and scalable server-side applications.</li>
<li><strong>PostgreSQL</strong>: An open-source relational database known for its robustness, extensibility, and compliance with SQL standards.</li>
<li><strong>TypeORM</strong>: An Object-Relational Mapping (ORM) library for TypeScript and JavaScript, supporting multiple databases.</li>
<li><strong>Docker</strong>: A platform for developing, shipping, and running applications in isolated containers. Used for running database on local machine.</li>
<li><strong>Google Auth</strong>: An authentication service by Google that allows secure user login with Google accounts.</li>
</ul>
<h3>Mail sending</h3>
<ul>
<li><strong>Mailtrap</strong>: SMTP provider for sending welcome emails to newly created users</li>
</ul>
<h3>Files storage</h3>
<ul>
<li><strong>AWS S3</strong>: A scalable storage service by Amazon Web Services for storing and retrieving any amount of data. Used for storing files.</li>
<li><strong>AWS CloudFront</strong>: A content delivery network (CDN) by AWS that distributes content globally with low latency.</li>
</ul>
<h3>Alternative database</h3>
<ul>
<li><strong>MongoDB</strong>: A NoSQL database known for its flexibility and scalability, storing data in JSON-like documents.</li>
<li><strong>Mongoose</strong>: An Object Data Modeling (ODM) library for MongoDB and Node.js, providing schema-based data validation.</li>
</ul>
<h3>Deployment</h3>
<ul>
<li><strong>PM2</strong>: A process manager for Node.js applications that simplifies deployment and management. Used for running deployed application on Amazon.</li>
<li><strong>AWS EC2</strong>: A service by Amazon Web Services providing resizable compute capacity in the cloud.</li>
</ul>
<h3>Testing and documentation</h3>
<ul>
<li><strong>Jest</strong>: A JavaScript testing framework for unit and integration testing with a focus on simplicity.</li>
<li><strong>Swagger</strong>: A toolset for designing, building, documenting, and consuming RESTful APIs.</li>
<li><strong>Compodoc</strong>: A documentation tool that generates static documentation from code.</li>
</ul>
<h2>How to run the project localy</h2>
<h3>1. Clone the Repository</h3>
<b>Example :</b><div><pre class="line-numbers"><code class="language-bash">git clone https://github.com/olha-dev-fullstack/nest-blog-api.git
cd nest-blog-api</code></pre></div><h3>2. Install Dependencies</h3>
<b>Example :</b><div><pre class="line-numbers"><code class="language-bash">npm install</code></pre></div><h3>3. Create <code>.env</code> files:</h3>
<ul>
<li><code>.env.development</code> for developmet mode with next structure:</li>
</ul>
<b>Example :</b><div><pre class="line-numbers"><code class="language-bash">DB_HOST=localhost
DB_PORT=5432
DB_USER=
DB_PASSWORD=
DB_NAME=
DB_SYNC=false
DB_AUTOLOAD=true

// randomly generated keys
API_VERSION=
PROFILE_API_KEY=

JWT_SECRET=
JWT_TOKEN_AUDIENCE=localhost:3000
JWT_TOKEN_ISSUER=localhost:3000
JWT_ACCESS_TOKEN_TTL=3600
JWT_REFRESH_TOKEN_TTL=86400

GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

AWS_PUBLIC_BUCKET_NAME=
AWS_REGION=
AWS_CLOUDFRONT_URL=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

// Mailtrap credentials
MAIL_HOST=
SMTP_USERNAME=
SMTP_PASSWORD=

MONGO_DB_USERNAME=
MONGO_DB_PASSWORD=
MONGO_DB_NAME=
MONGO_DB_CONNECTION_STRING=</code></pre></div><ul>
<li><p><code>.env.test</code> should be similatr to <code>env.development</code> to execute tests:</p>
</li>
<li><p>in production <code>.env</code> file will be used so it can be generated similarly to development one.</p>
</li>
</ul>
<h3>3. Database Setup</h3>
<p>Create <code>typeorm-cli.config.ts</code> file (you can use ``typeorm-cli.sample.config.ts` as an example) and set valid database_name</p>
<p>Run migrations to create local database:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-bash">npm run migration:run</code></pre></div><h3>5. Start the Server</h3>
<p>Run the NestJS server:</p>
<ul>
<li>watch mode</li>
</ul>
<b>Example :</b><div><pre class="line-numbers"><code class="language-bash">npm run start:dev</code></pre></div><ul>
<li>dev mode</li>
</ul>
<b>Example :</b><div><pre class="line-numbers"><code class="language-bash">npm run start</code></pre></div><ul>
<li>production mode</li>
</ul>
<b>Example :</b><div><pre class="line-numbers"><code class="language-bash">npm run start:prod</code></pre></div><p>The API will be available at <code>http://localhost:3000</code>.</p>
<h2>API Endpoints</h2>
<p>Swagger documentation: <a href="http://ec2-63-176-53-21.eu-central-1.compute.amazonaws.com/api#/">http://ec2-63-176-53-21.eu-central-1.compute.amazonaws.com/api#/</a></p>
<h2>Running Tests</h2>
<p>To run unit tests, use:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-bash">npm run test</code></pre></div><p>To run End-to-End tests, use:</p>
<b>Example :</b><div><pre class="line-numbers"><code class="language-bash">npm run test:e2e</code></pre></div><h2>Generate documentation</h2>
<b>Example :</b><div><pre class="line-numbers"><code class="language-bash">npm run doc</code></pre></div><p>It would be accessible on the port <code>3001</code>.</p>





















                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 0;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'getting-started';
            var COMPODOC_CURRENT_PAGE_URL = 'index.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="./js/libs/custom-elements.min.js"></script>
       <script src="./js/libs/lit-html.js"></script>

       <script src="./js/menu-wc.js" defer></script>
       <script nomodule src="./js/menu-wc_es5.js" defer></script>

       <script src="./js/libs/bootstrap-native.js"></script>

       <script src="./js/libs/es6-shim.min.js"></script>
       <script src="./js/libs/EventDispatcher.js"></script>
       <script src="./js/libs/promise.min.js"></script>

       <script src="./js/compodoc.js"></script>

       <script src="./js/tabs.js"></script>
       <script src="./js/menu.js"></script>
       <script src="./js/libs/clipboard.min.js"></script>
       <script src="./js/libs/prism.js"></script>
       <script src="./js/sourceCode.js"></script>
          <script src="./js/search/search.js"></script>
          <script src="./js/search/lunr.min.js"></script>
          <script src="./js/search/search-lunr.js"></script>
          <script src="./js/search/search_index.js"></script>
       <script src="./js/lazy-load-graphs.js"></script>


    </body>
</html>
